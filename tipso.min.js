(function(e,t,n,r){function o(t,n){this.element=e(t);this.settings=e.extend({},s,n);this._defaults=s;this._name=i;this._title=this.element.attr("title");this.mode="hide";this.init()}function u(){var e=t.navigator.msMaxTouchPoints;var r="ontouchstart"in n.createElement("div");if(e||r){return true}return false}function a(t){var n=t.clone();n.css("visibility","hidden");e("body").append(n);var r=n.outerHeight();n.remove();return r}function f(n){var r=n.tooltip(),i=n.element,s=n,o=e(t),u=10,f,l;switch(s.settings.position){case"top":l=i.offset().left+i.outerWidth()/2-r.outerWidth()/2;f=i.offset().top-a(r)-u;r.find(".tipso_arrow").css({marginLeft:-8});if(f<o.scrollTop()){f=i.offset().top+i.outerHeight()+u;r.find(".tipso_arrow").css({"border-bottom-color":s.settings.background,"border-top-color":"transparent"});r.removeClass("top bottom left right");r.addClass("bottom")}else{r.find(".tipso_arrow").css({"border-top-color":s.settings.background,"border-bottom-color":"transparent"});r.removeClass("top bottom left right");r.addClass("top")}break;case"bottom":l=i.offset().left+i.outerWidth()/2-r.outerWidth()/2;f=i.offset().top+i.outerHeight()+u;r.find(".tipso_arrow").css({marginLeft:-8});if(f+a(r)>o.scrollTop()+o.outerHeight()){f=i.offset().top-a(r)-u;r.find(".tipso_arrow").css({"border-top-color":s.settings.background,"border-bottom-color":"transparent"});r.removeClass("top bottom left right");r.addClass("top")}else{r.find(".tipso_arrow").css({"border-bottom-color":s.settings.background,"border-top-color":"transparent"});r.removeClass("top bottom left right");r.addClass(s.settings.position)}break;case"left":l=i.offset().left-r.outerWidth()-u;f=i.offset().top+i.outerHeight()/2-a(r)/2;r.find(".tipso_arrow").css({marginTop:-8,marginLeft:""});if(l<o.scrollLeft()){l=i.offset().left+i.outerWidth()+u;r.find(".tipso_arrow").css({"border-right-color":s.settings.background,"border-left-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"});r.removeClass("top bottom left right");r.addClass("right")}else{r.find(".tipso_arrow").css({"border-left-color":s.settings.background,"border-right-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"});r.removeClass("top bottom left right");r.addClass(s.settings.position)}break;case"right":l=i.offset().left+i.outerWidth()+u;f=i.offset().top+i.outerHeight()/2-a(r)/2;r.find(".tipso_arrow").css({marginTop:-8,marginLeft:""});if(l+u+s.settings.width>o.scrollLeft()+o.outerWidth()){l=i.offset().left-r.outerWidth()-u;r.find(".tipso_arrow").css({"border-left-color":s.settings.background,"border-right-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"});r.removeClass("top bottom left right");r.addClass("left")}else{r.find(".tipso_arrow").css({"border-right-color":s.settings.background,"border-left-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"});r.removeClass("top bottom left right");r.addClass(s.settings.position)}break}if(l<o.scrollLeft()&&(s.settings.position=="bottom"||s.settings.position=="top")){r.find(".tipso_arrow").css({marginLeft:l-8});l=0}if(l+s.settings.width>o.outerWidth()&&(s.settings.position=="bottom"||s.settings.position=="top")){diff=o.outerWidth()-(l+s.settings.width);r.find(".tipso_arrow").css({marginLeft:-diff-8,marginTop:""});l=l+diff}if(l<o.scrollLeft()&&(s.settings.position=="left"||s.settings.position=="right")){l=i.offset().left+i.outerWidth()/2-r.outerWidth()/2;r.find(".tipso_arrow").css({marginLeft:-8,marginTop:""});f=i.offset().top-a(r)-u;if(f<o.scrollTop()){f=i.offset().top+i.outerHeight()+u;r.find(".tipso_arrow").css({"border-bottom-color":s.settings.background,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"});r.removeClass("top bottom left right");r.addClass("bottom")}else{r.find(".tipso_arrow").css({"border-top-color":s.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"});r.removeClass("top bottom left right");r.addClass("top")}if(l+s.settings.width>o.outerWidth()){diff=o.outerWidth()-(l+s.settings.width);r.find(".tipso_arrow").css({marginLeft:-diff-8,marginTop:""});l=l+diff}if(l<o.scrollLeft()){r.find(".tipso_arrow").css({marginLeft:l-8});l=0}}if(l+s.settings.width>o.outerWidth()&&(s.settings.position=="left"||s.settings.position=="right")){l=i.offset().left+i.outerWidth()/2-r.outerWidth()/2;r.find(".tipso_arrow").css({marginLeft:-8,marginTop:""});f=i.offset().top-a(r)-u;if(f<o.scrollTop()){f=i.offset().top+i.outerHeight()+u;r.find(".tipso_arrow").css({"border-bottom-color":s.settings.background,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"});r.removeClass("top bottom left right");r.addClass("bottom")}else{r.find(".tipso_arrow").css({"border-top-color":s.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"});r.removeClass("top bottom left right");r.addClass("top")}if(l+s.settings.width>o.outerWidth()){diff=o.outerWidth()-(l+s.settings.width);r.find(".tipso_arrow").css({marginLeft:-diff-8,marginTop:""});l=l+diff}if(l<o.scrollLeft()){r.find(".tipso_arrow").css({marginLeft:l-8});l=0}}r.css({left:l+s.settings.offsetX,top:f+s.settings.offsetY})}var i="tipso",s={speed:400,background:"#55b555",color:"#ffffff",position:"top",width:200,delay:200,offsetX:0,offsetY:0,content:null,useTitle:false,onShow:null,onHide:null};e.extend(o.prototype,{init:function(){var t=this,r=this.element;r.addClass("tipso_style").removeAttr("title");if(u()){r.on("click"+"."+i,function(e){t.mode=="hide"?t.show():t.hide();e.stopPropagation()});e(n).on("click",function(){if(t.mode=="show"){t.hide()}})}else{r.on("mouseover"+"."+i,function(){t.show()});r.on("mouseout"+"."+i,function(){t.hide()})}},tooltip:function(){if(!this.tipso_bubble){this.tipso_bubble=e('<div class="tipso_bubble"><div class="tipso_content"></div><div class="tipso_arrow"></div></div>')}return this.tipso_bubble},show:function(){var n=this.tooltip(),r=this.element,i=this,s=e(t),o=10,u,a;n.css({background:i.settings.background,color:i.settings.color,width:i.settings.width}).hide();n.find(".tipso_content").html(i.content());f(i);s.resize(function(){f(i)});i.timeout=t.setTimeout(function(){n.appendTo("body").stop(true,true).fadeIn(i.settings.speed,function(){i.mode="show";if(e.isFunction(i.settings.onShow)){i.settings.onShow(e(this))}})},i.settings.delay)},hide:function(){var n=this,r=this.tooltip();t.clearTimeout(n.timeout);n.timeout=null;r.stop(true,true).fadeOut(n.settings.speed,function(){e(this).remove();if(e.isFunction(n.settings.onHide)&&n.mode=="show"){n.settings.onHide(e(this))}n.mode="hide"})},destroy:function(){$e=this.element;$e.off("."+i);$e.removeData(i);$e.removeClass("tipso_style").attr("title",this._title)},content:function(){var e,t=this.element,n=this,r=this._title;if(n.settings.content){e=n.settings.content}else{if(n.settings.useTitle==true){e=r}else{e=t.data("tipso")}}return e},update:function(e,t){var n=this;if(t){n.settings[e]=t}else{return n.settings[e]}}});e[i]=e.fn[i]=function(t){var n=arguments;if(t===r||typeof t==="object"){if(!(this instanceof e)){e.extend(s,t)}return this.each(function(){if(!e.data(this,"plugin_"+i)){e.data(this,"plugin_"+i,new o(this,t))}})}else if(typeof t==="string"&&t[0]!=="_"&&t!=="init"){var u;this.each(function(){var r=e.data(this,"plugin_"+i);if(!r){r=e.data(this,"plugin_"+i,new o(this,t))}if(r instanceof o&&typeof r[t]==="function"){u=r[t].apply(r,Array.prototype.slice.call(n,1))}if(t==="destroy"){e.data(this,"plugin_"+i,null)}});return u!==r?u:this}}})(jQuery,window,document)